# Apollo_server_example

Apollo_server Backend.

1. npm init -y

   - package.json ì„ ë§Œë“¤ì–´ì¤€ë‹¤

2. touch READ.MD

   - readme íŒŒì¼ ë§Œë“¤ê¸°

3. npm i express apollo-server-express

   - apollo ì„œë²„ ì¸ìŠ¤í†¨

4. touch server.js

   - apollo ì„œë²„ ì¸ìŠ¤í†¨ í›„ server.js íŒŒì¼ ë§Œë“¤ê¸°
   - require("dotenv").config();
     import express from "express";
     import { ApolloServer } from "apollo-server-express";
     import { typeDefs, resolvers } from "./schema.js";

     const PORT = process.env.PORT;
     const server = new ApolloServer({
     typeDefs,
     resolvers,
     });

     const app = express();
     server.applyMiddleware({ app });
     app.listen({ port: PORT }, () => {
     console.log(`ğŸš€Server is running on http://localhost:${PORT} âœ…`);
     });

5. npm i nodemon --save-dev

   - ì†ŒìŠ¤ ë³€ê²½ ì‹œ ìë™ìœ¼ë¡œ ì„œë²„ë¥¼ ì¬ì‹œì‘í•´ì£¼ëŠ” nodemon ì„¤ì¹˜

6. npm install --save-dev @babel/core, npm install @babel/preset-env --save-dev

   - node ë²„ì „ê³¼ ìƒê´€ì—†ì´ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í• ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” babel ì„¤ì¹˜

7. touch babel.config.json

   - babel.config.json íŒŒì¼ ë§Œë“¤ê¸°
   - {
     "presets": ["@babel/preset-env"]
     }

8. npm i @babel/node --save-dev

   - package.json ì˜ scripts ë¶€ë¶„ ë³€ê²½
   - "scripts": {
     "dev": "nodemon --exec babel-node server"
     },

9. npm install prisma --save-dev, npx prisma init

   - npm install prisma --save-dev : client ë¥¼ í†µí•´ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì™€ ì†Œí†µ
   - npx prisma init : prisma í´ë”, schema.prisma, .envë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤
   - https://www.prisma.io/docs/concepts/database-connectors/mysql prisma ì™€ mysql ì—°ê²°

10. prisma extension ì„¤ì¹˜í•˜ê¸°

    - ë‹¤ìš´ë¡œë“œ 6ë§Œ, ë²„ì „ 2.14 ì´ìƒ

11. migrate ëª…ë ¹ì–´ ì¶”ê°€ (package.json)

    - "scripts": {
      "dev": "nodemon --exec babel-node server",
      "migrate": "npx prisma migrate dev --preview-feature"
      },

12. yarn migrate

13. prisma clientë¥¼ í˜¸ì¶œí•˜ëŠ” client.js ë§Œë“¤ê¸°

    - import { PrismaClient } from "@prisma/client";

      const client = new PrismaClient();

      export default client;

14. npm i graphql-tools

15. typeDefs ì™€ resolvers ë¥¼ í˜¸ì¶œí•˜ëŠ” schema.js ë§Œë“¤ê¸°

    - import { loadFilesSync, mergeResolvers, mergeTypeDefs } from "graphql-tools";

      const loadedTypes = loadFilesSync(`${__dirname}/**/*.typeDefs.js`);
      const loadedResolvers = loadFilesSync(`${__dirname}/**/*.resolvers.js`);

      export const typeDefs = mergeTypeDefs(loadedTypes);
      export const resolvers = mergeResolvers(loadedResolvers);

16. npm i dotenv

17. graphql, prisma, bcrypt, jwt ë“±ë“± ì„¤ì¹˜ (package.json ì°¸ê³ . ì§€ê¸ˆ ì„œë²„ì—ëŠ” ë„£ì–´ë’€ìŒ)

18. yarn dev (ì„œë²„ ì‹¤í–‰í•´ë³´ê¸°)

# liunx setting

1. node, npm, yarn ì„¤ì¹˜

   - curl -sL https://deb.nodesource.com/setup_14.x -o nodesource_setup.sh

   - sudo bash nodesource_setup.sh

   - sudo apt-get install nodejs

   - sudo apt-get install build-essential

   - npm install -g yarn

2. linux ì„œë²„ì— Mysql ì„¸íŒ…

   - sudo apt install -y mysql-server

   - root ê³„ì • ë¹„ë°€ë²ˆí˜¸ ì„¸íŒ… : alter user 'root'@'localhost' identified with mysql_native_password by 'Root!2345';

   - create database db_name DEFAULT CHARACTER SET utf8;

   - grant all privileges on db_name.\* to db_name@localhost identified by 'Password';

   - FLUSH privileges;

3. .env ì™€ schema.prisma ì„¤ì • ë³€ê²½

4. git remote set-url origin ë¡œ git url ë³€ê²½

5. git push -u origin main
